!function o(r,a,c){function i(t,e){if(!a[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(d)return d(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=a[t]={exports:{}},r[t][0].call(n.exports,function(e){return i(r[t][1][e]||e)},n,n.exports,o,r,a,c)}return a[t].exports}for(var d="function"==typeof require&&require,e=0;e<c.length;e++)i(c[e]);return i}({1:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){var t,n=void 0===(n=e.url)?"":n,o=void 0===(o=e.method)?"GET":o,r=void 0===(a=e.headers)?{}:a,a=void 0===(a=e.content)?"":a,c=void 0===(e=e.success)?function(e,t){}:e,i=new XMLHttpRequest;for(t in i.open(o,n),r)i.setRequestHeader(t,r[t]);i.send(a),i.onreadystatechange=function(){4==i.readyState&&200==i.status&&c(i.responseText,i)}}},{}],2:[function(e,t,n){"use strict";n.__esModule=!0;var r=e("./ajax"),n=new(e("./poncon").default),a=(n.setPageList(["home","about"]),{home:{load:!1,loadData:function(o){new r.default({url:"get_keyword_list.php",success:function(e){a.home.load=!0;var t=o.querySelector("tbody"),n=o.querySelector("table");n&&t&&e&&(t.innerHTML=e),n.style.display="revert",o.querySelectorAll("td[contenteditable]").forEach(function(e){e.addEventListener("keydown",function(e){13!=e.keyCode||e.shiftKey||e.preventDefault()}),e.addEventListener("keyup",function(e){13!=e.keyCode||e.shiftKey||c(e)})}),o.querySelectorAll("td.delete").forEach(function(e){e.addEventListener("click",function(e){var e=e.target,t=e.parentNode,e=e.getAttribute("data-id");new r.default({url:"delete_keyword.php",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},content:"id="+e,success:function(e){e||alert("删除失败"),t.remove()}})})})}}),o.querySelector(".addKeyword").addEventListener("click",function(){var e,t=o.querySelector(".delete");t&&!t.getAttribute("data-id")?null!=(t=null==(t=t.parentNode)?void 0:t.querySelector("td"))&&t.focus():(t=o.querySelector("tbody"),(e=document.createElement("tr")).innerHTML='\n                <td contenteditable="true" class="keyword"></td>\n                <td contenteditable="true" class="reply"></td>\n                <td class="text-nowrap text-danger user-select-none delete" role="button">删除</td>',t.insertBefore(e,t.children[0]),o.querySelectorAll("td[contenteditable]").forEach(function(e){e.addEventListener("keydown",function(e){13!=e.keyCode||e.shiftKey||e.preventDefault()}),e.addEventListener("keyup",function(e){13!=e.keyCode||e.shiftKey||c(e)})}),null!=(t=e.querySelector("td"))&&t.focus())})}}});function c(e){var e=e.target,t=e.getAttribute("data-id"),n=null==(n=e.parentElement)?void 0:n.querySelector("td.keyword"),e=null==(e=e.parentElement)?void 0:e.querySelector("td.reply"),n=null==n?void 0:n.innerText,e=null==e?void 0:e.innerText;n&&e?new r.default({url:"update_keyword.php",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},content:"keyword="+encodeURIComponent(n)+"&reply="+encodeURIComponent(e)+"&id="+t,success:function(e){e?location.reload():alert("修改失败")}}):alert("请填写完整")}n.setPage("home",function(e,t){a.home.load||a.home.loadData(t)}),n.start()},{"./ajax":1,"./poncon":3}],3:[function(e,t,n){"use strict";function o(){this.pages={},this.pageNames=[]}n.__esModule=!0,o.prototype.changeView=function(e){e&&(document.querySelectorAll(".poncon-page").forEach(function(e){e.style.display="none"}),document.querySelector(".poncon-".concat(e)).style.display="")},o.prototype.setPageList=function(e){var n=this;e.forEach(function(e){var t=document.querySelector(".poncon-".concat(e));n.pages[e]={dom:t,event:function(){}}}),this.pageNames=e},o.prototype.setPage=function(e,t){var n;e&&(n=document.querySelector(".poncon-".concat(e)),this.pages[e]={dom:n,event:t||function(){}})},o.prototype.start=function(){var t=this;window.addEventListener("hashchange",function(e){e=new URL(e.newURL).hash;t.loadTarget(e)}),this.loadTarget()},o.prototype.loadTarget=function(e){var t=this.getTarget(e),n=this.getDom(t),e=this.getArgs(e);this.changeView(t),this.pages[t].event(t,n,e)},o.prototype.getArgs=function(e){e=(e||location.hash).split("/");return e.length<3?[]:e.slice(2)},o.prototype.getTarget=function(e){e=(e||location.hash).split("/")[1]||"";return 0!=e.search(/^\w+$/)||-1==this.pageNames.indexOf(e)?(history.replaceState({},"","".concat(location.pathname)),"home"):e},o.prototype.getDom=function(e){return document.querySelector(".poncon-".concat(e))},n.default=o},{}]},{},[2]);